// ==========================================================================
// Dark Mode Theme
// ==========================================================================

// Import variables to use as CSS variable defaults
@use '../base/variables' as *;

// Dark mode variables
:root {
  // Light mode (default) - using Sass variables as defaults
  --bg-primary: #{$bg-primary};
  --bg-secondary: #{$bg-secondary};
  --bg-light: #{$bg-light};
  --bg-dark: #{$bg-dark};
  --text-primary: #{$text-primary};
  --text-secondary: #{$text-secondary};
  --text-muted: #{$text-muted};
  --text-light: #{$text-light};
  --border-color: #{$border-color};
  --border-light: #{$border-light};
  --border-dark: #{$border-dark};
  --shadow-color: rgba(0, 0, 0, 0.1);
  --modal-bg: rgba(255, 255, 255, 0.95);
  --footer-stats-bg: rgba(255, 255, 255, 0.1);
  --footer-stats-border: rgba(255, 255, 255, 0.2);
  --gradient-color-1: #{$gradient-color-1}; // Sass variable as default
  --gradient-color-2: #{$gradient-color-2}; // Sass variable as default
}

// Dark mode
[data-theme="dark"] {
  --bg-primary: #1a1a1a;
  --bg-secondary: #2d2d2d;
  --bg-light: #3a3a3a;
  --bg-dark: #0f0f0f;
  --text-primary: #e0e0e0;
  --text-secondary: #b0b0b0;
  --text-muted: #888888;
  --text-light: #{$text-light}; // Use Sass variable for white text
  --border-color: #404040;
  --border-light: #4a4a4a;
  --border-dark: #333333;
  --shadow-color: rgba(0, 0, 0, 0.3);
  --modal-bg: rgba(26, 26, 26, 0.95);
  --footer-stats-bg: rgba(0, 0, 0, 0.3);
  --footer-stats-border: rgba(255, 255, 255, 0.1);
  --gradient-color-1: #000000; // Black for dark mode
  --gradient-color-2: #000000; // Black for dark mode

  body {
    background: #000000 !important; // Pure black background, override gradient
    color: #ffffff !important; // Pure white text
  }

  // Header
  .header {
    color: #ffffff !important; // Pure white text for header
    background: transparent; // Remove any header background
  }

  // Controls section
  .controls {
    background: #000000 !important; // Pure black background for dark mode
    padding: 0;
  }

  // Table container
  .table-container {
    background: #000000 !important; // Pure black background
    border: 1px solid #333333 !important; // Dark border
  }

  // Music table
  .music-table,
  #albumsTable {
    background: #000000 !important; // Pure black background
    color: #ffffff !important; // White text

    thead {
      background: #000000 !important; // Pure black for header
    }

    th {
      color: #ffffff !important; // White text for headers
      border-bottom: 1px solid #333333 !important; // Dark border
    }

    td {
      color: #ffffff !important; // White text for table cells
      border-bottom: 1px solid #333333 !important; // Dark border
    }

    tbody tr:hover {
      background: #141414 !important; // Dark gray on hover in dark mode
    }
  }

  // Sortable header hover state
  .sortable-header:hover {
    background-color: #141414 !important; // Dark gray on hover in dark mode
  }

  // Sort indicators
  .sort-asc,
  .sort-desc {
    .sort-indicator::after {
      color: #ffffff !important; // White sort indicators in dark mode
    }
  }

  // Artist and album name text
  .artist-name,
  .album-name,
  .album-year {
    color: #ffffff !important; // White text for artist and album names

    a {
      color: #ffffff !important; // White text for artist and album links
    }
  }

  // Cover modal album year styling with proper nesting
  .cover-modal-content {
    .cover-modal-info {
      .album-year {
        color: #ffffff !important; // White text for album year in cover modal dark mode
      }
    }
  }

  .cover-modal-info {
    .album-year {
      color: var(--text-light) !important; // Use CSS custom property for white text
    }
  }

  #coverModalInfo {
    .album-year {
      color: #ffffff !important; // Force white text using ID selector
    }

    > div.album-year {
      color: #ffffff !important; // White text for album year in dark mode
    }
  }

  #coverModal {
    #coverModalInfo {
      > div.album-year {
        color: #ffffff !important; // White text for album year in dark mode
      }
    }
  }

  // Buttons
  .btn-primary {
    background: var(--primary-color);
    border-color: var(--primary-color);
    color: var(--text-light);
  }

  .btn-secondary {
    background: var(--bg-secondary);
    border-color: var(--border-color);
    color: var(--text-primary);
  }

  // Dropdown
  .dropdown-menu {
    background: #1a1a1a !important; // Dark gray background
    border: 1px solid #333333 !important; // Dark border
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5) !important; // Dark shadow

    .dropdown-item {
      color: #ffffff !important; // White text
      
      &:hover {
        background: #2d2d2d !important; // Lighter gray on hover
      }
    }
  }

  // Modals
  .modal-content {
    background: #1a1a1a !important; // Dark gray background
    color: #ffffff !important; // White text
    border: 1px solid #333333 !important; // Dark border

    // Modal headers and titles
    h1, h2, h3, h4, h5, h6 {
      color: #ffffff !important; // White text for all modal headings
    }

    // Modal labels
    label {
      color: #ffffff !important; // White text for modal labels
    }

    // Modal paragraphs and text
    p {
      color: #ffffff !important; // White text for modal paragraphs
    }

    // Modal lists
    ul, ol {
      color: #ffffff !important; // White text for modal lists
    }

    // Modal list items
    li {
      color: #ffffff !important; // White text for modal list items
      
      a {
        color: #ffffff !important; // White text for modal list items
        text-decoration: underline;
        
        &:hover {
          text-decoration: none;
        }
      }
    }

    // Modal close buttons
    .close {
      color: #ffffff !important; // White close button
      
      &:hover {
        background-color: #404040 !important; // Medium gray hover background for better contrast
        color: #ffffff !important; // Keep white text on hover
      }
    }
  }

  // Edit warning
  .edit-warning {
    background: #2d3748 !important; // Dark blue-gray background
    color: #ffffff !important; // White text
    border: 1px solid #4a5568 !important; // Darker border

    strong {
      color: #ffffff !important; // White text for strong elements
    }
  }

  // Form elements
  input, select, textarea {
    background: #ffffff !important; // White background
    border: 1px solid #333333 !important; // Dark border
    color: #000000 !important; // Black text

    &:focus {
      border-color: #667eea !important; // Blue border on focus
      box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.3) !important; // Blue glow
    }
  }

  // Status badges
  .status-owned {
    background: #2d2d2d !important; // Dark background like edit/delete buttons
    color: #ffffff !important; // White text
    border: 1px solid #333333 !important; // Dark border

    .checkmark {
      color: #ffffff !important; // White checkmarks for owned status
    }
  }

  .status-wanted {
    background: #2d2d2d !important; // Dark background like edit/delete buttons
    color: #ffffff !important; // White text
    border: 1px solid #333333 !important; // Dark border

    .checkmark {
      color: #ffffff !important; // White checkmarks for wanted status
    }
  }

  .status-none {
    background: var(--bg-secondary);
    color: var(--text-muted);
  }

  // Status checkmarks and icons
  .checkmark {
    color: #ffffff !important; // White checkmarks in dark mode
  }

  // Mobile status badges in dark mode
  @media (max-width: 768px) {
    .status-owned,
    .status-wanted {
      background: #2d2d2d !important;
      border-radius: 4px;
      padding: 6px 0;
      width: 50px !important; // Match album art width on mobile
      text-align: center;
    }
  }

  // Year badges
  .year-badge {
    background: #2d2d2d !important; // Light gray background for better visibility
    color: #ffffff !important; // White text
    border: 1px solid #333333 !important; // Dark border
  }

  // Edit and delete buttons
  .btn-edit,
  .btn-delete {
    background: #2d2d2d !important; // Light gray background for better visibility
    color: #ffffff !important; // White text
    border: 1px solid #333333 !important; // Dark border

    &:hover {
      background: #404040 !important; // Slightly lighter gray on hover
      color: #ffffff !important; // Keep white text on hover
    }
  }

  // Filter buttons
  .filter-btn {
    background: #2d2d2d !important; // Light gray background
    color: #ffffff !important; // White text
    border: 1px solid #333333 !important; // Dark border

    &:hover {
      background: #404040 !important; // Slightly lighter gray on hover
      color: #ffffff !important; // Keep white text on hover
    }

    &.active {
      background: #D2199A !important; // Primary theme color for active state
      color: #ffffff !important; // White text for active state
    }
  }

  // Add button
  .add-btn {
    background: #48bb78 !important; // Bright vibrant green
    color: #ffffff !important; // White text
    border: 1px solid #38a169 !important; // Slightly darker green border

    &:hover {
      background: #38a169 !important; // Darker green on hover
      color: #ffffff !important; // Keep white text on hover
    }
  }

  // Info sections
  .warning,
  .password-requirements,
  .setup-instructions,
  .setup-status,
  .theme-note {
    background: #2d3748 !important; // Dark blue-gray background
    color: #ffffff !important; // White text
    border-left: 4px solid #4a5568 !important; // Darker border
  }

  // Status labels
  .status-label {
    color: #ffffff !important; // White text in dark mode
  }

  // Format stat items
  .format-stat-item,
  .label-stat-item {
    background: #2d3748 !important; // Dark blue-gray background
    color: #ffffff !important; // White text

    &:hover {
      background: #4a5568 !important; // Slightly lighter gray on hover
      color: #ffffff !important; // Keep white text on hover
    }

    .format-name,
    .label-name {
      color: #ffffff !important; // White text for format names
    }
  }

  // Style stat items
  .style-stat-item {
    background: #2d3748 !important; // Dark blue-gray background
    color: #ffffff !important; // White text

    &:hover {
      background: #4a5568 !important; // Slightly lighter gray on hover
      color: #ffffff !important; // Keep white text on hover
    }

    .style-name {
      color: #ffffff !important; // White text for style names
    }
  }

  // Year stat items
  .year-stat-item {
    background: #2d3748 !important; // Dark blue-gray background
    color: #ffffff !important; // White text

    &:hover {
      background: #4a5568 !important; // Slightly lighter gray on hover
      color: #ffffff !important; // Keep white text on hover
    }

    .year-name {
      color: #ffffff !important; // White text for year names
    }
  }

  // Stats containers
  .style-stats-container,
  .year-stats-container,
  .format-stats-container,
  .label-stats-container {
    border: 1px solid #333333 !important; // Dark border in dark mode
  }

  // Autocomplete
  .autocomplete-list {
    background: #1a1a1a !important; // Dark gray background
    border: 1px solid #333333 !important; // Dark border
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5) !important; // Dark shadow

    .autocomplete-item {
      color: #000000 !important; // Dark text by default
      
      &:hover {
        background: #2d2d2d !important; // Lighter gray on hover
        color: #ffffff !important; // White text on hover
      }
    }
  }

  // Loading states
  .loading {
    background: #000000 !important; // Pure black background
  }

  // Message boxes
  .message {
    background: #000000 !important; // Pure black background
    color: #ffffff !important; // White text
    border: none !important; // Remove border
    border-top: none !important; // Remove top border

    // Success messages - keep green colors
    &.success {
      background-color: #d4edda !important; // Light green background
      color: #155724 !important; // Dark green text
      border: 1px solid #c3e6cb !important; // Light green border
      border-top: none !important; // Remove top border
    }

    // Error messages - keep red colors
    &.error {
      background-color: #f8d7da !important; // Light red background
      color: #721c24 !important; // Dark red text
      border: 1px solid #f5c6cb !important; // Light red border
      border-top: none !important; // Remove top border
    }

    // Info messages - keep blue colors
    &.info {
      background-color: #d1ecf1 !important; // Light blue background
      color: #0c5460 !important; // Dark blue text
      border: 1px solid #bee5eb !important; // Light blue border
      border-top: none !important; // Remove top border
    }
  }

  // Chart text colors (for Chart.js)
  .chart-text {
    color: var(--text-primary) !important;
  }

  // Rating text colors
  .rating-value {
    color: #ffffff !important; // White text for rating values in dark mode
  }

  .rating-count {
    color: #b0b0b0 !important; // Light gray text for rating counts in dark mode
    
    a {
      color: #ffffff !important; // White text for rating count links in dark mode
    }
  }

  // Tracklist modal text colors
  .tracklist-modal-header {
    h3 {
      color: #ffffff !important; // White text for tracklist modal header in dark mode
    }
  }

  .tracklist-modal-info {
    color: #b0b0b0 !important; // Light gray text for tracklist modal info in dark mode
  }

  // Track list text colors
  .track-position {
    color: #ffffff !important; // White text for track positions in dark mode
  }

  .track-title {
    color: #ffffff !important; // White text for track titles in dark mode
  }

  .track-duration,
  .lyrics-btn {
    color: #b0b0b0 !important; // Light gray text for track durations in dark mode
  }
  .lyrics-btn {
    &:hover {
      background-color: #ffffff !important;
      color: #000000 !important;
    }
  }

  // Tracklist loading text
  .tracklist-loading {
    color: #ffffff !important; // White text for tracklist loading in dark mode
  }

  #tracklistModalInfo {
    div {
      a {
        color: #ffffff !important;
      }
    }
  }

  .album-link,
  .artist-link {
    &:focus {
      outline: 2px solid #e83db4;
    }
    &:hover {
      background: none;
    }
  }

  // Setup page dark mode styles
  .setup-page {
    background: #000000 !important; // Pure black background for dark mode
  }

  .setup-container {
    background: #000000 !important; // Dark gray background
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
  }

  .setup-header {
    background: #000000;
    color: #ffffff !important;
  }

  .setup-header-content {
    h1 {
      color: #ffffff !important;
    }
    
    p {
      color: #ffffff !important;
    }
  }

  .setup-nav .btn-back {
    background: #D2199A !important;
    color: #ffffff !important;
    border-color: #333333 !important;
    padding: $spacing-md;
    
    &:hover {
      background: rgba(255, 255, 255, 0.2);
    }
  }

  .setup-main {
    background: #000 !important;
    border: 1px solid #333 !important;
    box-shadow: 0 4px 6px rgba(0, 0, 0, .1);
  }

  .setup-section {
    h2 {
      color: #ffffff !important;
    }
    
    p {
      color: #ffffff !important;
    }
  }

  .setup-instructions {
    background: #2d2d2d !important;
    border-color: #404040 !important;
    
    h3 {
      color: #ffffff !important;
    }
    
    ol li {
      color: #ffffff !important;
      
      a {
        color: #667eea !important;
      }
    }
  }

  .setup-status .status-item {
    background: #2d2d2d !important;
    border-color: #404040 !important;
    
    .status-label {
      color: #ffffff !important;
    }
  }

  .form-group {
    label {
      color: #ffffff !important;
    }
    
    input[type="text"] {
      background: #ffffff !important;
      border-color: #404040 !important;
      color: #000000 !important;
    }
  }

  .setup-message {
    &.success {
      background: #d4edda !important;
      color: #155724 !important;
      border-color: #c3e6cb !important;
    }
    
    &.error {
      background: #f8d7da !important;
      color: #721c24 !important;
      border-color: #f5c6cb !important;
    }
  }

  .current-value {
    background: #2d2d2d !important;
    border: 1px solid $border-color;
    border-color: #404040 !important;
    border-radius: $border-radius-md;
    padding: $spacing-md;
    margin-bottom: $spacing-sm;
    font-size: 0.9rem;
    
    strong {
      color: $text-light;
    }
  }

  .radio-option {
    .radio-label {
      color: #ffffff !important;
    }
  }

  .theme-note {
    background: #2d3748 !important;
    border-color: #4a5568 !important;
    color: #ffffff !important;
  }

  .color-picker-item {
    label {
      color: #ffffff !important;
    }
    
    input[type="text"] {
      background: #ffffff !important;
      border-color: #404040 !important;
      color: #000000 !important;
    }
  }

  .btn-save {
    background: $success-color !important; // Use Sass variable directly
    color: #ffffff !important;
  }

  .btn-secondary {
    background: #2d2d2d !important;
    color: #ffffff !important;
    border-color: #404040 !important;
    
    &:hover {
      background: #3a3a3a !important;
    }
  }

  // Tab styling for dark mode
  .tab-button {
    background: #2d2d2d !important;
    border-color: #404040 !important;
    color: #ffffff !important;
    
    &:hover {
      background: #3a3a3a !important;
      border-color: $primary-color !important;
      color: $primary-color !important;
    }
    
    &.active {
      background: $primary-color !important;
      border-color: $primary-color !important;
      color: #ffffff !important;
      
      &:hover {
        background: $primary-dark !important;
        border-color: $primary-dark !important;
      }
    }
  }

  // Settings tab styling for dark mode
  .settings-group {
    h3 {
      color: #ffffff !important;
      border-color: #404040 !important;
    }
    
    .settings-description {
      color: #b0b0b0 !important;
    }
  }

  .artist-links-controls,
  .stats-controls,
  .album-info-controls {
    .btn-select-all,
    .btn-select-none {
      background: #2d2d2d !important;
      border-color: #404040 !important;
      color: #ffffff !important;
      
      &:hover {
        background: $primary-color !important;
        color: #ffffff !important;
        border-color: $primary-color !important;
      }
    }
  }

  .toggle-group {
    h4 {
      color: #ffffff !important;
    }
    
    .toggle-option {
      &:hover {
        background: rgba($primary-color, 0.1) !important;
      }
    }
    
    .toggle-label {
      color: #ffffff !important;
    }
    
    .toggle-switch {
      .toggle-slider {
        background-color: #555555 !important;
        
        &:before {
          background-color: #ffffff !important;
        }
      }
      
      input[type="checkbox"]:checked + .toggle-slider {
        background-color: $primary-color !important;
      }
      
      input[type="checkbox"]:focus + .toggle-slider {
        box-shadow: 0 0 0 2px rgba($primary-color, 0.3) !important;
      }
    }
  }

  .checkbox-option {
    &:hover {
      .checkbox-label {
        color: $primary-color !important;
      }
    }
    
    .checkbox-label {
      color: #ffffff !important;
    }
    
    input[type="checkbox"] {
      accent-color:#FFFFFF;
    }
    
    input[type="checkbox"]:checked + .checkbox-label {
      color: #ffffff !important;
      font-weight: 600;
    }
  }

  // Demo reset section dark mode
  .demo-reset {
    border-color: #ff6b35;
    background: rgba(255, 107, 53, 0.1);
    
    h2, p {
      color: #ff6b35;
    }
  }

  // Display mode group dark mode styles
  .display-mode-group {
    .radio-option {
      background-color: #2d2d2d;
      border-color: #4a4a4a;
      
      &:hover {
        border-color: #667eea;
        background-color: #3a3a3a;
      }
      
      &.checked {
        border-color: #667eea;
        background-color: #3a3a3a;
      }
    }
    
    .radio-label {
      color: #e0e0e0;
    }
    
    input[type="radio"]:checked + .radio-label {
      color: #667eea;
    }
  }

  // Dark mode styles for artist website section
  .artist-website-section {
    border-top-color: $border-light;
  }

  .artist-website-header {
    color: $text-light;
  }

  .artist-website-link {
    background: $primary-dark;
    
    &:hover {
      background: $primary-color;
    }
    
    &.discogs-link {
      background: #6a3d8a; // Darker version of $secondary-color
      
      &:hover {
        background: $secondary-color;
      }
    }
  }

  // Dark Mode Styles for All Modals
  #welcomeModal {
    .welcome-info p {
      color: #e2e8f0;
    }
    
    .demo-features {
      h3 {
        color: #e2e8f0;
        border-bottom-color: #4a5568;
      }
      
      ul li {
        color: #a0aec0;
        
        strong {
          color: #e2e8f0;
        }
      }
      
      code {
        background: #4a5568;
        color: #fc8181;
      }
    }
    
    .demo-note {
      background: #2d3748;
      border-color: #4a5568;
      
      p {
        color: #fbb6ce;
      }
    }
    
    .btn-primary {
      background-color: #e83db4;
      border-color: #e83db4;
      
      &:hover {
        background-color: #d42a9f;
        border-color: #c0258a;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }
      
      &:active {
        transform: translateY(0);
      }
    }
  }

  #demoResetSuccessModal {
    .success-info {
      background: transparent;
      border-color: transparent;
      
      p {
        color: #e2e8f0;
      }
      
      ul li {
        color: #a0aec0;
      }
      
      code {
        background: rgba(0,0,0,.5);
        color: #f8f700;
      }
      
      .info {
        color: #f8f700 !important;
        font-size: 1.25rem !important;
        font-style: italic !important;
        margin-top: 1.5rem !important;
        background-color: rgba(0,0,0,.5) !important;
        padding: 20px;
        border-radius: 5px;
        border-left: 4px solid #4a5568 !important;
      }
    }
    
    .btn-primary {
      background-color: #e83db4;
      border-color: #e83db4;
      
      &:hover {
        background-color: #d42a9f;
        border-color: #c0258a;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }
      
      &:active {
        transform: translateY(0);
      }
    }
  }

  #resetDemoModal {
    .reset-info {
      background: transparent;
      border-color: transparent;
      
      p {
        color: #e2e8f0;
      }
      
      ul li {
        color: #a0aec0;
      }
      
      code {
        background: rgba(0,0,0,.5);
        color: #f8f700;
      }
    }
    
    .warning {
      color: #f8f700 !important;
      font-size: 1.25rem !important;
      font-style: italic !important;
      margin-top: 1.5rem !important;
      background-color: rgba(0,0,0,.5) !important;
    }
    
    .btn-danger {
      background-color: #e83db4;
      border-color: #e83db4;
      
      &:hover {
        background-color: #d42a9f;
        border-color: #c0258a;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }
      
      &:active {
        transform: translateY(0);
      }
    }
  }

  #deleteConfirmationModal {
    .btn-danger {
      background-color: #e83db4;
      border-color: #e83db4;
      
      &:hover {
        background-color: #d42a9f;
        border-color: #c0258a;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }
      
      &:active {
        transform: translateY(0);
      }
    }
    
    .album-info {
      background: #2d3748;
      border-color: #4a5568;
      
      strong {
        color: #e2e8f0;
      }
      
      .year {
        color: #a0aec0;
      }
    }
    
    .warning {
      color: #fc8181;
    }
  }
}



// Demo reset item dark mode styles
// .demo-reset-item {
//   color: #ff6b35 !important;
  
//   &:hover {
//     background-color: rgba(255, 107, 53, 0.2) !important;
//     color: #ff8c69 !important;
//   }
  
//   svg {
//     color: #ff6b35;
//   }
// }

// Smooth transitions for theme changes
* {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}
